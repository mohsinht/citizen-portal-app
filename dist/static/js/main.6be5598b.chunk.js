(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{209:function(e,t,a){e.exports=a(409)},214:function(e,t,a){},409:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(83),c=a.n(l),s=(a(214),a(413)),i=a(415),o=a(410),m=a(221),d=a(412),u=a(4),p=function(e){return function(t,a,n){(0,n.getFirebase)().auth().signInWithEmailAndPassword(e.email,e.password).then(function(){t({type:"LOGIN_SUCCESS"})}).catch(function(e){t({type:"LOGIN_ERROR",err:"Wrong email or password"})})}},h=Object(u.b)(function(e){return{}},function(e){return{signOut:function(){return e(function(e,t,a){(0,a.getFirebase)().auth().signOut().then(function(){e({type:"SIGNOUT_SUCCESS"})})})}}})(function(e){return r.a.createElement("div",null,r.a.createElement(d.a,{to:"/",className:"btn btn-floating cpBtn lighten-1 cp-profileDP"},e.profile.initials),r.a.createElement("p",{className:"menu-profile-name"},e.profile.firstName," ",e.profile.lastName),r.a.createElement("hr",{className:"menu-separator"}),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(d.a,{to:"/"},r.a.createElement("i",{className:"material-icons"},"insert_chart_outlined"),"Dashboard")),r.a.createElement("li",null,r.a.createElement(d.a,{to:"/selectdepartment"},r.a.createElement("i",{className:"material-icons"},"note_add"),"Add Complaint")),r.a.createElement("li",null,r.a.createElement(d.a,{to:"/view"},r.a.createElement("i",{className:"material-icons"},"remove_red_eye"),"View Complaints")),r.a.createElement("li",null,r.a.createElement(d.a,{to:"/history"},r.a.createElement("i",{className:"material-icons"},"access_time"),"History")),r.a.createElement("li",null,r.a.createElement("a",{onClick:e.signOut},r.a.createElement("i",{className:"material-icons"},"exit_to_app"),"Log Out"))))}),E=function(){return r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(d.a,{to:"/signin"},"Login")),r.a.createElement("li",null,r.a.createElement(d.a,{to:"/register"},"Register")),r.a.createElement("li",null,r.a.createElement(d.a,{to:"/loginAsAdmin"},"Admin")))},g=Object(u.b)(function(e){return{auth:e.firebase.auth,profile:e.firebase.profile}})(function(e){var t=e.auth,a=e.profile,n=t.uid?r.a.createElement(h,{profile:a}):r.a.createElement(E,null),l=r.a.createElement("li",null,r.a.createElement(m.a,{to:"/selectdepartment"},r.a.createElement("div",{className:"waves-effect waves-light btn cp-button"},"Add A Complaint"))),c=t.uid?l:"";return r.a.createElement("div",null,r.a.createElement("nav",{className:"nav-wrapper grey darken-3"},r.a.createElement("div",{className:"container cpContent"},r.a.createElement("ul",{className:"right"},c))),r.a.createElement("ul",{id:"slide-out",className:"sidenav sidenav-fixed cp-menu"},r.a.createElement(m.a,{to:"/"},r.a.createElement("img",{src:"/images/logo.png",alt:"Citizen Portal",className:"cp-logo"})),r.a.createElement("hr",{className:"menuLine"}),n))}),f=a(9),b=a(10),v=a(12),N=a(11),y=a(13),C=a(45),O=a.n(C),w=function(e){var t=e.notifications;return r.a.createElement("div",{className:"section"},r.a.createElement("div",{className:"card z-depth-0"},r.a.createElement("div",{className:"card-content"},r.a.createElement("span",{className:"card-title"},"Notifications"),r.a.createElement("ul",{className:"online-users"},t&&t.map(function(e){return r.a.createElement("li",{key:e.id},r.a.createElement(m.a,{to:"/complaint/"+e.link},r.a.createElement("span",{className:"pink-text"},e.user," "),r.a.createElement("span",null,e.content," against ",e.against),r.a.createElement("div",{className:"note-date grey-text"},O()(e.time.toDate()).fromNow())))})))))},S=[{name:"Transport",category:"Transport",icon:"directions_bus",slug:"transport"},{name:"Education",category:"Education",icon:"school",slug:"edu"},{name:"Health",category:"Health",icon:"local_hospital",slug:"health"},{name:"Tax",category:"Finance",icon:"attach_money",slug:"tax"},{name:"Wapda",category:"Billing",icon:"graphic_eq",slug:"wapda"},{name:"Traffic Police",category:"police",icon:"time_to_leave",slug:"trafficPolice"},{name:"Municipal Department",category:"municipal",icon:"location_city",slug:"municipal"},{name:"Rescue Department",category:"rescue",icon:"whatshot",slug:"rescue"},{name:"Justice Department",category:"justice",icon:"account_balance",slug:"justice"}],j=function(e){var t,a=e.complaint,n=S.filter(function(e){return Object.keys(e).some(function(t){return e[t].toLowerCase().includes(a.department)})});return n.length<1&&(n=[{name:"No Department"}]),a&&(t=0===a.status?r.a.createElement("span",{className:"new badge blue","data-badge-caption":""},"Pending"):1===a.status?r.a.createElement("span",{className:"new badge","data-badge-caption":""},"Resolved"):r.a.createElement("span",{className:"new badge red","data-badge-caption":""},"Rejected")),r.a.createElement("div",{className:"card z-depth-0 complaint-summary "},r.a.createElement("div",{className:"card-content grey-text text-darken-3"},r.a.createElement("span",{className:"right text-lighten-3",style:{fontSize:14}},t),r.a.createElement("span",{className:"card-title"},a.title),r.a.createElement("p",null,"Against ",r.a.createElement("span",{className:"cp-theme"},n[0].name)),r.a.createElement("p",{className:"grey-text"},O()(a.createdAt.toDate()).calendar())))},A=function(e){var t=e.complaints;return 0==t.length?r.a.createElement("div",{className:"complaint-list section center"},r.a.createElement("p",{style:{marginLeft:-12}},"no complaints yet")):r.a.createElement("div",{className:"complaint-list section"},t&&t.map(function(e){return r.a.createElement(m.a,{to:"/complaint/"+e.id,key:e.id},r.a.createElement(j,{complaint:e}))}))},k=a(19),x=a(7),I=a(414),F=function(e){for(var t=0,a=0,n=0,l=e.complaints,c=0;c<l.length;c++)0===l[c].status?t++:1===l[c].status?n++:a++;return r.a.createElement("div",{className:"section"},r.a.createElement("div",{className:"card z-depth-0"},r.a.createElement("div",{className:"card-content"},r.a.createElement("span",{className:"card-title"},"Stats"),r.a.createElement("div",{className:"card green stat-card z-depth-0"},r.a.createElement("span",{className:"stat-value"},r.a.createElement("b",null,n)," resolved complaints")),r.a.createElement("div",{className:"card blue stat-card z-depth-0"},r.a.createElement("span",{className:"stat-value"},r.a.createElement("b",null,t)," pending complaints")),r.a.createElement("div",{className:"card red stat-card z-depth-0"},r.a.createElement("span",{className:"stat-value"},r.a.createElement("b",null,a)," rejected complaints")))))},D=function(e){function t(){return Object(f.a)(this,t),Object(v.a)(this,Object(N.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){var e=this.props,t=e.complaints,a=e.auth,n=e.notifications,l=e.allComplaints;return a.uid?r.a.createElement("div",{className:"dashboard container cpContent"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s12 m6"},r.a.createElement(A,{complaints:t}),r.a.createElement(m.a,{to:"/view"},r.a.createElement("div",{className:"waves-effect waves-light btn cp-button",style:{marginLeft:125}},"View all complaints"))),r.a.createElement("div",{className:"col s12 m5 offset-m1"},r.a.createElement(w,{notifications:n}),r.a.createElement(F,{complaints:l})))):r.a.createElement(I.a,{to:"/signin"})}}]),t}(n.Component),R=Object(x.d)(Object(u.b)(function(e){var t=e.firebase.profile.isAdmin,a=e.firebase.auth.uid,n=e.firestore.ordered.complaints,r=[],l=0;n&&Object.keys(n).forEach(function(e){l<4&&(t||n[e].complaintFromId===a)&&(r.push(n[e]),l++)});var c=[];n&&Object.keys(n).forEach(function(e){(t||n[e].complaintFromId===a)&&c.push(n[e])}),console.log(c);var s=e.firestore.ordered.notifications,i=[];return l=0,s&&Object.keys(s).forEach(function(e){l<3&&(t||s[e].userid===a)&&(i.push(s[e]),l++)}),{complaints:r,auth:e.firebase.auth,notifications:i,allComplaints:c}}),Object(k.firestoreConnect)([{collection:"complaints",orderBy:["createdAt","desc"]},{collection:"notifications",orderBy:["time","desc"]}]))(D),_=function(e){var t,a=e.complaint,n=a?a.markedBy:"",l=a?a.reason:"",c=new Date;return a&&(t=1===a.status?r.a.createElement("span",{className:"new badge","data-badge-caption":""},"Resolved"):r.a.createElement("span",{className:"new badge red","data-badge-caption":""},"Rejected")),a&&a.status<1?"":r.a.createElement("div",{className:"row",style:{marginTop:50}},r.a.createElement("h1",{style:{fontSize:22}},"Evaluation Report"),r.a.createElement("hr",null),r.a.createElement("div",{className:"card-panel z-depth-0 grey darken-3"},t,r.a.createElement("hr",{style:{marginTop:30,marginBottom:10}}),r.a.createElement("span",{className:"white-text"},r.a.createElement("b",null,"Reason: "),l),r.a.createElement("div",{className:"card-action grey lighten-4 grey-text evaluation-footer"},r.a.createElement("div",null,"Evaluated By ",n," - ",a.markedByDesignation," "),r.a.createElement("div",null,c.toString()))))},L=a(22),P=a(26),T=(a(369),function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(v.a)(this,Object(N.a)(t).call(this,e))).state={status:"",markedByDesignation:"",reason:"",errMsg:"",comId:""},a.handleChange=function(e){if("status"===e.target.id){var t=parseInt(e.target.value);a.setState({status:t})}else a.setState(Object(L.a)({},e.target.id,e.target.value))},a.handleSubmit=function(e){e.preventDefault(),a.props.markComplaint(a.state)},a.state={status:1,reason:"",markedByDesignation:"head",comId:a.props.complaint.id},a}return Object(y.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){var e=this.props.complaint,t=(e.id,this.state.errMsg);return r.a.createElement("div",{className:"card z-depth-0 grey darken-3"},r.a.createElement("div",{className:"card-content"},r.a.createElement("span",{className:"card-title white-text"},r.a.createElement("p",null,"Admin Options")),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"input-field col s6"},r.a.createElement("p",{className:"white-text",style:{marginBottom:10}},"Change status to"),r.a.createElement("select",{id:"status",className:"browser-default",onChange:this.handleChange},r.a.createElement("option",{value:"1"},"Resolved"),r.a.createElement("option",{value:"2"},"Rejected"),r.a.createElement("option",{value:"0"},"Pending"))),r.a.createElement("div",{className:"input-field col s6"},r.a.createElement("p",{className:"white-text",style:{marginBottom:10}},"From ",e.department,", mark this complaint as"),r.a.createElement("select",{id:"markedByDesignation",className:"browser-default",onChange:this.handleChange},r.a.createElement("option",{value:"Head"},"Head"),r.a.createElement("option",{value:"Deputy_Director"},"Deputy Director"),r.a.createElement("option",{value:"Assistant_Director"},"Assistant Director"),r.a.createElement("option",{value:"Secretary"},"Secretary")))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"content",className:"reason-label"},"Reason"),r.a.createElement("textarea",{id:"reason",name:"content",cols:"30",rows:"20",className:"materialize-textarea add-complaint-details reason-details",onChange:this.handleChange,"data-length":"120"}),r.a.createElement("span",{className:"helper-text white-text","data-error":"wrong","data-success":"right"},"Add all the details that you've gone through to solve this issue"))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"input-field"},r.a.createElement("button",{className:"btn cpBtn lighten-1 z-depth-0 right"},"Update"),r.a.createElement("div",{className:"center red-text"},t?r.a.createElement("p",null,t):null))))))}}]),t}(n.Component)),U=Object(u.b)(function(e){return{auth:e.firebase.auth}},function(e){return{markComplaint:function(t){return e((a=t,function(e,t,n){n.getFirebase;var r=(0,n.getFirestore)(),l=t().firebase.profile,c=t().firestore.data.complaints[a.comId];r.collection("complaints").doc(a.comId).set(Object(P.a)({},c,{markedBy:l.firstName+" "+l.lastName,markedOn:new Date,reason:a.reason,status:a.status,markedByDesignation:a.markedByDesignation})).then(function(){e({type:"UPDATE_COMPLAINT_SUCCESS"})}).catch(function(t){e({type:"UPDATE_COMPLAINT_ERROR",err:t})})}));var a}}})(T),B=Object(x.d)(Object(u.b)(function(e,t){var a=t.match.params.id,n=e.firestore.data.complaints;return{complaint:n?n[a]:null,auth:e.firebase.auth,profile:e.firebase.profile,id:a}}),Object(k.firestoreConnect)([{collection:"complaints"}]))(function(e){var t=e.complaint,a=e.auth,n=e.profile,l=e.id;if(!a.uid)return r.a.createElement(I.a,{to:"/signin"});var c,s,i="";if(n&&n.isAdmin){var o={complaint:t,id:l};s=r.a.createElement(U,{complaint:o})}return t&&(i=0===t.status?"Pending":1===t.status?"Resolved":"Rejected",c=t.isAnnonymous?"Annonymous":t.complaintFromFirstName+" "+t.complaintFromLastName),t?r.a.createElement("div",{className:"container section project-details cpContent"},r.a.createElement("div",{className:"back-button"},r.a.createElement(m.a,{to:"/"},r.a.createElement("i",{className:"material-icons"},"chevron_left"),r.a.createElement("span",{style:{position:"absolute"}},"back"))),r.a.createElement("div",{className:"card z-depth-0"},r.a.createElement("div",{className:"card-content"},r.a.createElement("span",{className:"card-title"},r.a.createElement("p",{style:{fontSize:15}},"Status: ",i)," ",t.title),r.a.createElement("p",null,t.content),r.a.createElement("div",{className:"card-action grey lighten-4 grey-text",style:{marginTop:25}},r.a.createElement("div",null,"Posted by ",c," against ",t.department),r.a.createElement("div",null,O()(t.createdAt.toDate()).calendar())))),r.a.createElement(_,{complaint:t}),s):r.a.createElement("div",{className:"container center cpContent"},r.a.createElement("p",null,"LOADING COMPLAINT..."))}),M=function(e){function t(){var e,a;Object(f.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(v.a)(this,(e=Object(N.a)(t)).call.apply(e,[this].concat(r)))).state={email:"",password:""},a.handleChange=function(e){a.setState(Object(L.a)({},e.target.id,e.target.value))},a.handleSubmit=function(e){e.preventDefault(),a.props.signIn(a.state)},a}return Object(y.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){var e=this.props,t=e.authError;return e.auth.uid?r.a.createElement(I.a,{to:"/"}):r.a.createElement("div",null,r.a.createElement("div",{className:"container cpContent"},r.a.createElement("form",{onSubmit:this.handleSubmit,className:"white"},r.a.createElement("h5",{className:"grey-text text-darken-3"},"Sign In"),r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("input",{type:"email",id:"email",onChange:this.handleChange})),r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{type:"password",id:"password",onChange:this.handleChange})),r.a.createElement("div",{className:"input-field"},r.a.createElement("button",{className:"btn cpBtn lighten-1 z-depth-0"},"Login"),r.a.createElement("div",{className:"center red-text"},t?r.a.createElement("p",null,t):null)))))}}]),t}(n.Component),z=Object(u.b)(function(e){return{authError:e.auth.authError,auth:e.firebase.auth}},function(e){return{signIn:function(t){return e(p(t))}}})(M),G=function(e){function t(){var e,a;Object(f.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(v.a)(this,(e=Object(N.a)(t)).call.apply(e,[this].concat(r)))).state={email:"",password:"",firstName:"",lastName:"",cnic:"",address:"",city:"",province:"",jobtitle:"",jobcompany:"",phonenumber:"",errMsg:""},a.handleChange=function(e){a.setState(Object(L.a)({},e.target.id,e.target.value))},a.handleSubmit=function(e){e.preventDefault(),console.log(a.state),a.props.signUp(a.state)},a}return Object(y.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){var e=this.props,t=e.auth,a=e.authError;return t.uid?r.a.createElement(I.a,{to:"/"}):r.a.createElement("div",null,r.a.createElement("div",{className:"container cpContent"},r.a.createElement("form",{onSubmit:this.handleSubmit,className:"white"},r.a.createElement("h5",{className:"grey-text text-darken-3"},"Register"),r.a.createElement("p",null,"Account"),r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("input",{type:"email",id:"email",onChange:this.handleChange})),r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{type:"password",id:"password",onChange:this.handleChange})),r.a.createElement("p",{style:{marginTop:40}},"Personal"),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s12 m6"},r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"firstName"},"First Name"),r.a.createElement("input",{type:"text",id:"firstName",onChange:this.handleChange}),r.a.createElement("span",{className:"helper-text","data-error":"wrong","data-success":"right"},"As mentioned on CNIC"))),r.a.createElement("div",{className:"col s12 m6"},r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"lastName"},"Last Name"),r.a.createElement("input",{type:"text",id:"lastName",onChange:this.handleChange}),r.a.createElement("span",{className:"helper-text","data-error":"wrong","data-success":"right"},"As mentioned on CNIC")))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s12 m6"},r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"phonenumber"},"Mobile Number"),r.a.createElement("input",{type:"text",id:"phonenumber",onChange:this.handleChange}),r.a.createElement("span",{className:"helper-text","data-error":"wrong","data-success":"right"},"Format: 0336-4251234"))),r.a.createElement("div",{className:"col s12 m6"},r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"cnic"},"CNIC Number"),r.a.createElement("input",{type:"text",id:"cnic",onChange:this.handleChange}),r.a.createElement("span",{className:"helper-text","data-error":"wrong","data-success":"right"},"Format: 35202-1234561-9")))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"address"},"Complete Home Address"),r.a.createElement("input",{type:"text",id:"address",onChange:this.handleChange}),r.a.createElement("span",{className:"helper-text","data-error":"wrong","data-success":"right"},"Include city and province name"))),r.a.createElement("div",{className:"input-field"},r.a.createElement("button",{className:"btn cpBtn lighten-1 z-depth-0"},"Register"),r.a.createElement("div",{className:"center red-text"},a?r.a.createElement("p",null,a):null)))))}}]),t}(n.Component),H=Object(u.b)(function(e){return{auth:e.firebase.auth,authError:e.auth.authError}},function(e){return{signUp:function(t){return e((a=t,function(e,t,n){var r=n.getFirebase,l=n.getFirestore,c=r(),s=l();c.auth().createUserWithEmailAndPassword(a.email,a.password).then(function(e){return s.collection("users").doc(e.user.uid).set({firstName:a.firstName,lastName:a.lastName,initials:a.firstName[0]+a.lastName[0],cnic:a.cnic,address:a.address,phonenumber:a.phonenumber})}).then(function(){e({type:"SIGNUP_SUCCESS"})}).catch(function(t){console.log(t),e({type:"SIGNUP_ERROR",err:t})})}));var a}}})(G),W=function(e){function t(){var e,a;Object(f.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(v.a)(this,(e=Object(N.a)(t)).call.apply(e,[this].concat(r)))).state={title:"",content:"",address:"",errMsg:"please fill in the details",department:a.props.match.params.slug,status:0,markedBy:"",markedOn:"",reason:"",isAnnonymous:0},a.handleChange=function(e){console.log(e.target.checked),"annonymous"!==e.target.id&&e.target.value.length<5?a.setState({errMsg:[e.target.id]+" cannot be less than 5 letters!"}):a.setState({errMsg:""}),"annonymous"!==e.target.id?a.setState(Object(L.a)({},e.target.id,e.target.value)):a.setState({isAnnonymous:e.target.checked})},a.handleSubmit=function(e){e.preventDefault(),a.state.title.length<5||a.state.content.length<5||a.state.address.length<5?a.setState({errMsg:"Details cannot be less than 5 letters!"}):a.state.title.length>50||a.state.content.length>1e3||a.state.address.length>250?a.setState({errMsg:"Too long content. Make sure that title is less than 50 characters and details are less than 1000 characters."}):""===a.state.errMsg&&(a.props.addComplaint(a.state),a.props.history.push("/added"))},a}return Object(y.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){if(!this.props.auth.uid)return r.a.createElement(I.a,{to:"/signin"});var e=this.props.match.params.slug,t=S.filter(function(t){return Object.keys(t).some(function(a){return t[a].toLowerCase().includes(e)})});if(0==t.length)return this.props.history.push("/selectdepartment"),r.a.createElement("div",null,r.a.createElement("p",null,"error"));console.log(t);var a=this.state.errMsg;return r.a.createElement("div",null,r.a.createElement("div",{className:"container cpContent"},r.a.createElement("div",{className:"back-button",style:{marginTop:20}},r.a.createElement(m.a,{to:"/selectdepartment"},r.a.createElement("i",{className:"material-icons"},"chevron_left"),r.a.createElement("span",{style:{position:"absolute"}},"back"))),r.a.createElement("form",{onSubmit:this.handleSubmit,className:"white"},r.a.createElement("h5",{className:"grey-text text-darken-3"},"Add a Complaint - ",r.a.createElement("span",{className:"add-complaint-department"},t[0].name)),r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"title"},"Title"),r.a.createElement("input",{type:"text",id:"title",onChange:this.handleChange,"data-length":"50"}),r.a.createElement("span",{className:"helper-text","data-error":"wrong","data-success":"right"},"Add up to 50 characters in the title")),r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"address"},"Address"),r.a.createElement("input",{type:"text",id:"address",onChange:this.handleChange}),r.a.createElement("span",{className:"helper-text","data-error":"wrong","data-success":"right"},"Complete address of the location where you find these irregularities")),r.a.createElement("div",{className:"switch"},r.a.createElement("label",null,"Show My Name",r.a.createElement("input",{id:"annonymous",onChange:this.handleChange,type:"checkbox"}),r.a.createElement("span",{className:"lever"}),"Remain Annonymous")),r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"content"},"Complaint Details"),r.a.createElement("textarea",{name:"content",id:"content",cols:"30",rows:"20",className:"materialize-textarea add-complaint-details",onChange:this.handleChange,"data-length":"120"}),r.a.createElement("span",{className:"helper-text","data-error":"wrong","data-success":"right"},"Add all the details for the authorities to properly investigate your problem")),r.a.createElement("div",{className:"input-field"},r.a.createElement("button",{className:"btn cpBtn lighten-1 z-depth-0"},"Submit")),r.a.createElement("div",{className:"center red-text"},a?r.a.createElement("p",null,a):null))))}}]),t}(n.Component),Q=Object(u.b)(function(e){return{auth:e.firebase.auth}},function(e){return{addComplaint:function(t){return e(function(e){return function(t,a,n){n.getFirebase;var r=(0,n.getFirestore)(),l=a().firebase.profile,c=a().firebase.auth.uid;r.collection("complaints").add(Object(P.a)({},e,{complaintFromFirstName:l.firstName,complaintFromLastName:l.lastName,complaintFromId:c,createdAt:new Date})).then(function(){t({type:"ADD_COMPLAINT_SUCCESS"})}).catch(function(e){t({type:"ADD_COMPLAINT_ERROR",err:e})})}}(t))}}})(W),J=function(e){var t=e.department;return r.a.createElement("div",{className:"card z-depth-0 complaint-summary col s12 m6 l3 department-box"},r.a.createElement("div",{className:"card-content grey-text text-darken-3"},r.a.createElement("span",null,r.a.createElement("i",{className:"material-icons department-icon"},t.icon)),r.a.createElement("hr",{className:"department-icon-separator"}),r.a.createElement("span",{className:"card-title department-name"},t.name)))},Y=function(e){function t(){var e;return Object(f.a)(this,t),(e=Object(v.a)(this,Object(N.a)(t).call(this))).state={searchQuery:"",fDept:""},e.handleChange=function(t){e.setState({searchQuery:t.target.value})},e.state={searchQuery:"",fDept:S},e}return Object(y.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){if(!this.props.auth.uid)return r.a.createElement(I.a,{to:"/signin"});var e=this.state,t=e.searchQuery,a=e.fDept,n=t.toLowerCase(),l=a.filter(function(e){return Object.keys(e).some(function(t){return e[t].toLowerCase().includes(n)})});return console.log(l),r.a.createElement("div",null,r.a.createElement("div",{className:"container cpContent"},r.a.createElement("div",{className:"complaint-heading"},r.a.createElement("h1",null,"Complaint Form")),r.a.createElement("div",null,r.a.createElement("div",{className:"row",style:{marginTop:0}},r.a.createElement("div",{className:"col s12 m3 complaint-department-heading"},r.a.createElement("h2",null,"Select Department")),r.a.createElement("div",{className:"col s12 m9 offset-m3 complaint-department-separator"},r.a.createElement("hr",null)))),r.a.createElement("div",null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"input-field col s3 offset-m4"},r.a.createElement("input",{id:"searchText",type:"text",placeholder:"Search",className:"validate",onChange:this.handleChange}),r.a.createElement("span",null,r.a.createElement("i",{className:"material-icons searchIcon"},"search"))))),r.a.createElement("div",{className:"row departments-list section"},l&&l.map(function(e){return r.a.createElement(m.a,{to:"/add/"+e.slug,key:e.slug},r.a.createElement(J,{department:e}))}))))}}]),t}(n.Component),V=Object(u.b)(function(e){return{auth:e.firebase.auth}})(Y),q=Object(x.d)(Object(u.b)(function(e){console.log(e.firebase.auth.uid);var t=e.firebase.auth.uid,a=e.firebase.profile.isAdmin,n=e.firestore.ordered.complaints,r=[];return n&&Object.keys(n).forEach(function(e){(a||n[e].complaintFromId===t)&&r.push(n[e])}),console.log(r),{complaints:r,auth:e.firebase.auth}}),Object(k.firestoreConnect)([{collection:"complaints",orderBy:["createdAt","desc"]}]))(function(e){var t=e.complaints;return e.auth.uid?r.a.createElement("div",{className:"complaint-list section view-complaints"},t&&t.map(function(e){return r.a.createElement(m.a,{to:"/complaint/"+e.id,key:e.id},r.a.createElement(j,{complaint:e}))})):r.a.createElement(I.a,{to:"/signin"})}),K=function(){return r.a.createElement("div",{className:"cpContent"},r.a.createElement("i",{className:"material-icons success-icon cp-theme"},"done"),r.a.createElement("p",{className:"center success-text",style:{width:574}},"Your complaint has been added. Please wait while the authorities accept and resolve your complaint. This may take a little time to complete."),r.a.createElement(m.a,{to:"/"},r.a.createElement("div",{className:"waves-effect waves-light btn cp-button success-btn"},"Go back to dashboard")))},Z=function(e){function t(){return Object(f.a)(this,t),Object(v.a)(this,Object(N.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){var e=this.props,t=e.auth,a=e.notifications;return t.uid?r.a.createElement("div",{className:"dashboard container cpContent"},r.a.createElement("div",{className:"row"},r.a.createElement(w,{notifications:a}))):r.a.createElement(I.a,{to:"/signin"})}}]),t}(n.Component),$=Object(x.d)(Object(u.b)(function(e){var t=e.firebase.auth.uid,a=e.firestore.ordered.notifications,n=[];return a&&Object.keys(a).forEach(function(e){a[e].userid===t&&n.push(a[e])}),{auth:e.firebase.auth,notifications:n}}),Object(k.firestoreConnect)([{collection:"notifications",orderBy:["time","desc"]}]))(Z),X=function(e){function t(){var e,a;Object(f.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(v.a)(this,(e=Object(N.a)(t)).call.apply(e,[this].concat(r)))).state={email:"",password:""},a.handleChange=function(e){a.setState(Object(L.a)({},e.target.id,e.target.value))},a.handleSubmit=function(e){e.preventDefault(),a.props.signIn(a.state)},a}return Object(y.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){var e=this.props,t=e.authError;return e.auth.uid?r.a.createElement(I.a,{to:"/"}):r.a.createElement("div",null,r.a.createElement("div",{className:"container cpContent"},r.a.createElement("form",{onSubmit:this.handleSubmit,className:"white",style:{width:600,marginLeft:180}},r.a.createElement("h5",{className:"grey-text text-darken-3"},"Account Access - Admin Only"),r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("input",{type:"email",id:"email",onChange:this.handleChange})),r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{type:"password",id:"password",onChange:this.handleChange})),r.a.createElement("div",{className:"input-field"},r.a.createElement("button",{className:"btn cpBtn lighten-1 z-depth-0 cpBtn2"},"Access Admin"),r.a.createElement("div",{className:"center red-text"},t?r.a.createElement("p",null,t):null)))))}}]),t}(n.Component),ee=Object(u.b)(function(e){return console.log(e),{authError:e.auth.authError,auth:e.firebase.auth}},function(e){return{signIn:function(t){return e(p(t))}}})(X);var te=function(){return r.a.createElement(s.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(g,null),r.a.createElement(i.a,null,r.a.createElement(o.a,{exact:!0,path:"/",component:R}),r.a.createElement(o.a,{path:"/complaint/:id",component:B}),r.a.createElement(o.a,{path:"/signin",component:z}),r.a.createElement(o.a,{path:"/register",component:H}),r.a.createElement(o.a,{path:"/add/:slug",component:Q}),r.a.createElement(o.a,{path:"/selectdepartment",component:V}),r.a.createElement(o.a,{path:"/view",component:q}),r.a.createElement(o.a,{path:"/added",component:K}),r.a.createElement(o.a,{path:"/history",component:$}),r.a.createElement(o.a,{path:"/loginAsAdmin",component:ee}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ae={authError:null},ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_ERROR":return Object(P.a)({},e,{authError:t.err});case"LOGIN_SUCCESS":return console.log("LOGIN SUCCESSFUL!"),Object(P.a)({},e,{authError:null});case"SIGNOUT_SUCCESS":return console.log("SIGNOUT SUCCESSFUL!"),e;case"SIGNUP_SUCCESS":return console.log("SIGNUP SUCCESSFUL!"),Object(P.a)({},e,{authError:null});case"SIGNUP_ERROR":return console.log("SIGNUP FAILED!"),Object(P.a)({},e,{authError:t.err.message});default:return e}},re={},le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_COMPLAINT_SUCCESS":console.log("COMPLAINT CREATED!",t.complaint);break;case"ADD_COMPLAINT_ERROR":console.log("COMPLAINT FAILED!",t.err);break;case"UPDATE_COMPLAINT_SUCCESS":console.log("COMPLAINT STATUS CHANGE SUCCESSFUL!",t.err);break;case"UPDATE_COMPLAINT_ERROR":console.log("COMPLAINT STATUS FAILED!",t.err)}return e},ce=a(57),se=Object(x.c)({auth:ne,complaint:le,firestore:ce.firestoreReducer,firebase:k.firebaseReducer}),ie=a(208),oe=a(86),me=a.n(oe);a(403),a(407);me.a.initializeApp({apiKey:"AIzaSyBx1H9YFkWi908F2YQ8JSYgf6-8ZV_u4SM",authDomain:"pm-citizen-portal.firebaseapp.com",databaseURL:"https://pm-citizen-portal.firebaseio.com",projectId:"pm-citizen-portal",storageBucket:"pm-citizen-portal.appspot.com",messagingSenderId:"414898851060"}),me.a.firestore().settings({timestampsInSnapshots:!0});var de=me.a,ue=Object(x.e)(se,Object(x.d)(Object(x.a)(ie.a.withExtraArgument({getFirebase:k.getFirebase,getFirestore:ce.getFirestore})),Object(k.reactReduxFirebase)(de,{userProfile:"users",useFirestoreForProfile:!0,attachAuthIsReady:!0}),Object(ce.reduxFirestore)(de)));c.a.render(r.a.createElement("p",{className:"center",style:{marginTop:310}},"Loading!"),document.getElementById("root")),ue.firebaseAuthIsReady.then(function(){c.a.render(r.a.createElement(u.a,{store:ue},r.a.createElement(te,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})})}},[[209,2,1]]]);
//# sourceMappingURL=main.6be5598b.chunk.js.map